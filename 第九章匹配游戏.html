<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>匹配消消乐 - 评估类型匹配</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial Rounded MT Bold', 'Microsoft YaHei', sans-serif;
            background-color: #f5f5dc; /* 米白色背景 */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        h1 {
            color: #4a4a4a;
            font-size: 2.5rem;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .game-info {
            display: flex;
            justify-content: space-between;
            width: 90%;
            max-width: 800px;
            margin-bottom: 20px;
        }
        
        .timer, .score {
            font-size: 1.2rem;
            color: #666;
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 800px;
            gap: 15px;
            margin-top: 10px;
        }
        
        .bubble {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            text-align: center;
            padding: 10px;
            transition: all 0.3s ease;
            box-shadow: 
                inset 0 -8px 10px rgba(0, 0, 0, 0.2),
                inset 0 8px 10px rgba(255, 255, 255, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.3);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            user-select: none;
            line-height: 1.3;
        }
        
        .bubble:hover {
            transform: scale(1.05);
        }
        
        .bubble.selected {
            transform: scale(1.1);
            box-shadow: 
                inset 0 -8px 10px rgba(0, 0, 0, 0.2),
                inset 0 8px 10px rgba(255, 255, 255, 0.4),
                0 0 20px 5px rgba(255, 215, 0, 0.7);
        }
        
        .bubble.matched {
            visibility: hidden;
            opacity: 0;
            transform: scale(0);
        }
        
        .instructions {
            background-color: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            max-width: 800px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .instructions h3 {
            color: #4a4a4a;
            margin-bottom: 10px;
        }
        
        .instructions p {
            color: #666;
            line-height: 1.5;
        }
        
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px 50px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
            z-index: 100;
            display: none;
        }
        
        .success-message h2 {
            color: #4CAF50;
            margin-bottom: 15px;
        }
        
        .success-message p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .restart-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .restart-btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>六下单词消消乐 - 评估类型匹配</h1>
    
    <div class="game-info">
        <div class="timer">用时: <span id="time">00:00</span></div>
        <div class="score">匹配: <span id="matchedCount">0</span>/<span id="totalPairs">8</span></div>
    </div>
    
    <div class="instructions">
        <h3>游戏说明</h3>
        <p>点击泡泡，将左侧的"形成性评估"或"总结性评估"与右侧对应的描述匹配起来。匹配成功泡泡会消失，匹配所有8对即可获胜！</p>
    </div>
    
    <div class="game-container" id="gameContainer"></div>
    
    <div class="success-message" id="successMessage">
        <h2>恭喜你挑战成功！</h2>
        <p>完成时间: <span id="completionTime">00:00</span></p>
        <button class="restart-btn" onclick="restartGame()">再玩一次</button>
    </div>

    <!-- 音效元素 -->
    <audio id="popSound">
        <source src="https://assets.mixkit.co/active_storage/sfx/257/257-preview.mp3" type="audio/mp3">
    </audio>
    
    <audio id="matchSound">
        <source src="https://assets.mixkit.co/active_storage/sfx/258/258-preview.mp3" type="audio/mp3">
    </audio>
    
    <audio id="errorSound">
        <source src="https://assets.mixkit.co/active_storage/sfx/256/256-preview.mp3" type="audio/mp3">
    </audio>

    <script>
        // 根据图片内容创建单词配对数据
        const wordPairs = [
            { category: "形成性评估", description: "assessment FOR learning" },
            { category: "形成性评估", description: "occurs during learning" },
            { category: "形成性评估", description: "low-stakes" },
            { category: "形成性评估", description: "can adjust instruction" },
            { category: "总结性评估", description: "assessment OF learning" },
            { category: "总结性评估", description: "occurs after learning" },
            { category: "总结性评估", description: "high-stakes" },
            { category: "总结性评估", description: "cannot adjust instruction" }
        ];

        // 游戏状态变量
        let selectedBubbles = [];
        let matchedPairs = 0;
        let startTime;
        let timerInterval;
        let gameStarted = false;

        // 初始化游戏
        function initGame() {
            const gameContainer = document.getElementById('gameContainer');
            gameContainer.innerHTML = '';
            selectedBubbles = [];
            matchedPairs = 0;
            
            // 更新匹配计数显示
            document.getElementById('matchedCount').textContent = '0';
            document.getElementById('totalPairs').textContent = wordPairs.length;
            
            // 创建所有类别和描述的数组
            let allItems = [];
            wordPairs.forEach(pair => {
                allItems.push({ text: pair.category, type: 'category', pair: pair.description });
                allItems.push({ text: pair.description, type: 'description', pair: pair.category });
            });
            
            // 随机排序数组
            allItems = shuffleArray(allItems);
            
            // 创建泡泡元素
            allItems.forEach((item, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.textContent = item.text;
                bubble.dataset.type = item.type;
                bubble.dataset.pair = item.pair;
                bubble.dataset.index = index;
                
                // 根据类型设置不同的颜色
                if (item.type === 'category') {
                    // 类别泡泡使用蓝色系
                    const hue = item.text === '形成性评估' ? 200 : 0; // 蓝色或红色
                    bubble.style.background = `radial-gradient(circle at 30% 30%, hsl(${hue}, 80%, 70%), hsl(${hue}, 80%, 40%))`;
                } else {
                    // 描述泡泡使用绿色系
                    const hue = 120 + Math.floor(Math.random() * 60); // 绿色系
                    bubble.style.background = `radial-gradient(circle at 30% 30%, hsl(${hue}, 80%, 70%), hsl(${hue}, 80%, 40%))`;
                }
                
                bubble.addEventListener('click', handleBubbleClick);
                gameContainer.appendChild(bubble);
            });
            
            // 重置计时器
            document.getElementById('time').textContent = '00:00';
            clearInterval(timerInterval);
            gameStarted = false;
            
            // 隐藏成功消息
            document.getElementById('successMessage').style.display = 'none';
        }

        // 处理泡泡点击事件
        function handleBubbleClick(event) {
            const bubble = event.currentTarget;
            
            // 如果泡泡已经匹配或已经选中，则忽略点击
            if (bubble.classList.contains('matched') || bubble.classList.contains('selected')) {
                return;
            }
            
            // 播放点击音效
            playSound('pop');
            
            // 开始计时（如果是第一次点击）
            if (!gameStarted) {
                startTimer();
                gameStarted = true;
            }
            
            // 如果已经选中了两个泡泡，先重置它们
            if (selectedBubbles.length === 2) {
                selectedBubbles.forEach(b => {
                    b.classList.remove('selected');
                });
                selectedBubbles = [];
            }
            
            // 选中当前泡泡
            bubble.classList.add('selected');
            selectedBubbles.push(bubble);
            
            // 如果选中了两个泡泡，检查是否匹配
            if (selectedBubbles.length === 2) {
                const bubble1 = selectedBubbles[0];
                const bubble2 = selectedBubbles[1];
                
                // 检查是否匹配（一个类别和一个描述，且内容对应）
                if ((bubble1.dataset.type === 'category' && bubble2.dataset.type === 'description' && 
                     bubble1.dataset.pair === bubble2.textContent) ||
                    (bubble2.dataset.type === 'category' && bubble1.dataset.type === 'description' && 
                     bubble2.dataset.pair === bubble1.textContent)) {
                    
                    // 匹配成功
                    setTimeout(() => {
                        bubble1.classList.add('matched');
                        bubble2.classList.add('matched');
                        selectedBubbles = [];
                        matchedPairs++;
                        
                        // 更新匹配计数
                        document.getElementById('matchedCount').textContent = matchedPairs;
                        
                        // 播放匹配成功音效
                        playSound('match');
                        
                        // 检查游戏是否完成
                        if (matchedPairs === wordPairs.length) {
                            endGame();
                        }
                    }, 500);
                } else {
                    // 不匹配
                    setTimeout(() => {
                        bubble1.classList.remove('selected');
                        bubble2.classList.remove('selected');
                        selectedBubbles = [];
                        
                        // 播放错误音效
                        playSound('error');
                    }, 1000);
                }
            }
        }

        // 开始计时器
        function startTimer() {
            startTime = new Date();
            timerInterval = setInterval(() => {
                const currentTime = new Date();
                const elapsedTime = Math.floor((currentTime - startTime) / 1000);
                const minutes = Math.floor(elapsedTime / 60).toString().padStart(2, '0');
                const seconds = (elapsedTime % 60).toString().padStart(2, '0');
                document.getElementById('time').textContent = `${minutes}:${seconds}`;
            }, 1000);
        }

        // 结束游戏
        function endGame() {
            clearInterval(timerInterval);
            const completionTime = document.getElementById('time').textContent;
            document.getElementById('completionTime').textContent = completionTime;
            document.getElementById('successMessage').style.display = 'block';
        }

        // 重新开始游戏
        function restartGame() {
            initGame();
        }

        // 播放音效
        function playSound(type) {
            const sound = document.getElementById(`${type}Sound`);
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(e => console.log("音频播放失败:", e));
            }
        }

        // 辅助函数：随机打乱数组
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // 页面加载时初始化游戏
        window.onload = initGame;
    </script>
</body>
</html>